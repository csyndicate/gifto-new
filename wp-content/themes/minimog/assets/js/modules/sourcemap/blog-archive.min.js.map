{"version":3,"sources":["blog-archive.js"],"names":["$","$pageSidebars","Helpers","window","minimog","filterPostsByUrl","url","options","settings","extend","loadMore","scrollTop","$btnLoadMore","decodeURIComponent","history","pushState","ajax","type","dataType","success","response","$response","$gridWrapper","$newItems","children","remove","find","fragments","MinimogGridLayout","each","push","this","attr","let","i","totalFragments","length","key","$key","empty","$newElement","html","document","body","trigger","offsetTop","offset","top","Math","max","animate","$thisSidebar","hasClass","stop","slideDown","fn","perfectScrollbar","isHandheld","beforeSend","setElementHandling","setBodyHandling","complete","unsetElementHandling","setBodyCompleted","ready","lastST","$window","$el","data","on","$button","currentST","halfWH","height","parseInt","outerHeight","evt","preventDefault","href","includes","location","origin","jQuery"],"mappings":"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","file":"../../blog-archive.min.js","sourcesContent":["/**\n * Functions for archive pages.\n */\n(\n\tfunction( $ ) {\n\t\t'use strict';\n\n\t\tvar $body             = $( 'body' ),\n\t\t    $pageSidebars     = $( '.page-sidebar' ),\n\t\t    Helpers           = window.minimog.Helpers,\n\t\t    collapseDuration  = 250,\n\t\t    COLLAPSED_CLASS   = 'collapsed',\n\t\t    COLLAPSIBLE_CLASS = 'sidebar-widgets-collapsible';\n\n\t\t$( document ).ready( function() {\n\t\t\thandlerScrollInfinite();\n\n\t\t\t$( document.body ).on( 'click', '.minimog-grid-pagination a.page-numbers', function( evt ) {\n\t\t\t\tevt.preventDefault();\n\n\t\t\t\tvar $link = $( this ),\n\t\t\t\t    href  = $link.attr( 'href' ),\n\t\t\t\t    url   = href.includes( window.location.origin ) ? href : window.location.origin + href;\n\n\t\t\t\tfilterPostsByUrl( url, { scrollTop: 1 } );\n\t\t\t} );\n\n\t\t\t$( document.body ).on( 'click', '.archive-load-more-button', function( evt ) {\n\t\t\t\tevt.preventDefault();\n\n\t\t\t\tvar $button = $( this ),\n\t\t\t\t    href    = $button.attr( 'data-url' ),\n\t\t\t\t    url     = href.includes( window.location.origin ) ? href : window.location.origin + href;\n\n\t\t\t\tfilterPostsByUrl( url, { loadMore: 1 } );\n\t\t\t} );\n\t\t} );\n\n\t\tfunction filterPostsByUrl( url, options = {} ) {\n\t\t\tvar settings = $.extend( true, {}, {\n\t\t\t\tloadMore: 0,\n\t\t\t\tscrollTop: 0\n\t\t\t}, options );\n\n\t\t\turl = decodeURIComponent( url );\n\n\t\t\tif ( ! settings.loadMore ) {\n\t\t\t\thistory.pushState( {}, null, url );\n\t\t\t}\n\n\t\t\tvar $btnLoadMore = $( '.archive-load-more-button' );\n\n\t\t\t$.ajax( {\n\t\t\t\turl: url,\n\t\t\t\ttype: 'GET',\n\t\t\t\tdataType: 'html',\n\t\t\t\tsuccess: function( response ) {\n\t\t\t\t\tvar $response = $( response );\n\n\t\t\t\t\tvar $gridWrapper = $( '#minimog-main-post' );\n\n\t\t\t\t\tif ( ! settings.loadMore ) {\n\t\t\t\t\t\t$gridWrapper.children( '.minimog-grid' ).children( '.grid-item' ).remove();\n\t\t\t\t\t}\n\n\t\t\t\t\tvar $newItems = $response.find( '#minimog-main-post .grid-item' );\n\t\t\t\t\t$gridWrapper.MinimogGridLayout( 'update', $newItems );\n\n\t\t\t\t\tvar fragments = [\n\t\t\t\t\t\t'.minimog-grid-pagination',\n\t\t\t\t\t];\n\n\t\t\t\t\tvar $filterWidgets = $( '.minimog-wp-widget-filter' );\n\n\t\t\t\t\t$filterWidgets.each( function() {\n\t\t\t\t\t\tfragments.push( '#' + $( this ).attr( 'id' ) );\n\t\t\t\t\t} );\n\n\t\t\t\t\tfor ( let i = 0, totalFragments = fragments.length; i < totalFragments; i ++ ) {\n\t\t\t\t\t\tvar key  = fragments[i],\n\t\t\t\t\t\t    $key = $( key );\n\n\t\t\t\t\t\tif ( $key.length > 0 ) {\n\t\t\t\t\t\t\t$key.empty();\n\t\t\t\t\t\t\tvar $newElement = $response.find( key );\n\t\t\t\t\t\t\tif ( $newElement.length > 0 ) {\n\t\t\t\t\t\t\t\t$key.html( $newElement.html() );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t$( document.body ).trigger( 'minimog_get_post_fragments_loaded', [ $response ] );\n\n\t\t\t\t\tif ( settings.scrollTop ) {\n\t\t\t\t\t\tvar offsetTop = $gridWrapper.offset().top;\n\t\t\t\t\t\toffsetTop -= 198; // Header + topbar + filter bar.\n\t\t\t\t\t\toffsetTop     = Math.max( 0, offsetTop );\n\n\t\t\t\t\t\t$( 'html, body' ).animate( { scrollTop: offsetTop }, 300 );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Disable collapse if it opens before.\n\t\t\t\t\t$pageSidebars.each( function() {\n\t\t\t\t\t\tvar $thisSidebar = $( this );\n\t\t\t\t\t\tif ( $thisSidebar.hasClass( COLLAPSIBLE_CLASS ) ) {\n\t\t\t\t\t\t\t$thisSidebar.find( '.widget:not(.' + COLLAPSED_CLASS + ')' ).find( '.widget-content' ).stop().slideDown( collapseDuration );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t\t// Update Widget Scrollable size.\n\t\t\t\t\tif ( $.fn.perfectScrollbar && ! Helpers.isHandheld() ) {\n\t\t\t\t\t\t$pageSidebars.find( '.widget-scrollable' ).each( function() {\n\t\t\t\t\t\t\t$( this ).find( '.widget-content-inner' ).perfectScrollbar( 'update' );\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tbeforeSend: function() {\n\t\t\t\t\tif ( settings.loadMore ) {\n\t\t\t\t\t\tHelpers.setElementHandling( $btnLoadMore );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tHelpers.setBodyHandling();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcomplete: function() {\n\t\t\t\t\tif ( settings.loadMore ) {\n\t\t\t\t\t\tHelpers.unsetElementHandling( $btnLoadMore );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tHelpers.setBodyCompleted();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tfunction handlerScrollInfinite() {\n\t\t\tvar $el = $( '.minimog-grid-pagination' );\n\n\t\t\tif ( 'infinite' !== $el.data( 'type' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar lastST  = 0;\n\t\t\tvar $window = $( window );\n\n\t\t\t$window.on( 'scroll', function() {\n\t\t\t\tvar currentST = $( this ).scrollTop();\n\n\t\t\t\t// Scroll down only.\n\t\t\t\tif ( currentST > lastST ) {\n\t\t\t\t\tvar windowHeight = $window.height();\n\t\t\t\t\t// 90% window height.\n\t\t\t\t\tvar halfWH       = 90 / 100 * windowHeight;\n\t\t\t\t\thalfWH           = parseInt( halfWH );\n\n\t\t\t\t\tvar elOffsetTop = $el.offset().top;\n\t\t\t\t\tvar elHeight    = $el.outerHeight( true );\n\t\t\t\t\tvar offsetTop   = elOffsetTop + elHeight;\n\t\t\t\t\tvar finalOffset = offsetTop - halfWH;\n\n\t\t\t\t\tif ( currentST >= finalOffset ) {\n\t\t\t\t\t\tvar $button = $el.find( '.archive-load-more-button' );\n\n\t\t\t\t\t\tif ( ! $button.hasClass( 'updating-icon' ) ) {\n\t\t\t\t\t\t\t$button.trigger( 'click' );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlastST = currentST;\n\t\t\t} );\n\t\t}\n\n\t}( jQuery )\n);\n"]}